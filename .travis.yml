language: csharp
solution: ./bible-21-osis-to-epub/bible-21-osis-to-epub.sln

jobs:
  include:

    - stage: GitHub Release
      install:
      - travis_retry nuget restore -source "https://www.nuget.org/api/v2" ./bible-21-osis-to-epub/bible-21-osis-to-epub.sln
      script: 
      - echo "Building Application ..."
      - msbuild ./bible-21-osis-to-epub/bible-21-osis-to-epub.sln /p:Configuration=Release
      - echo "Deploying to GitHub releases ..."
      deploy:
        provider: releases
        api_key:
          secure: $SECURE_API_KEY
        file: './bible-21-osis-to-epub/bin/Release/bible-21-epub.exe'
        skip_cleanup: true
        on:
          tags: true
        branches:
          only:
          - master